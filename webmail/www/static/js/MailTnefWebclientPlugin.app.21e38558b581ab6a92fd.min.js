webpackJsonp([13],{310:function(i,e,n){"use strict";i.exports=function(i){var e=n(182);if(e.getUserRole()===Enums.UserRole.NormalUser){var s=n(2),t=n(44),a=n(185),l=n(181),u=n(191);return{start:function(i){e.subscribeEvent("MailWebclient::ParseFile::after",function(i){if(i&&s.isFunction(i.addAction)&&"dat"===i.extension()){i.mailtnefSubFilesLoaded=t.observable(!1),i.mailtnefSubFilesLoading=t.observable(!1),i.mailtnefExpandFile=function(){this.mailtnefSubFilesLoaded()||this.mailtnefSubFilesLoading()?this.subFilesExpanded(!0):(this.mailtnefSubFilesLoading(!0),u.send("MailTnefWebclientPlugin","ExpandFile",{Hash:this.hash()},function(e){this.mailtnefSubFilesLoading(!1),e.Result&&(this.subFiles([]),l.isNonEmptyArray(e.Result)&&s.each(e.Result,s.bind(function(e){var n=i.getNewInstance();n.parse(e),this.subFiles.push(n)},this)),this.mailtnefSubFilesLoaded(!0),this.subFilesExpanded(!0))},this))};var e={Text:t.computed(function(){return this.subFilesExpanded()?a.i18n("COREWEBCLIENT/ACTION_COLLAPSE_FILE"):this.mailtnefSubFilesLoading()?a.i18n("COREWEBCLIENT/INFO_LOADING"):a.i18n("COREWEBCLIENT/ACTION_EXPAND_FILE")},i),Handler:s.bind(function(){this.mailtnefSubFilesLoading()||(this.subFilesExpanded()?this.subFilesExpanded(!1):this.mailtnefExpandFile())},i)};i.addAction("expand",!0,e),i.removeAction("view")}})}}}return null}}});